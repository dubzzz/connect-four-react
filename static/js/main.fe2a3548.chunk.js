(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(29),i=n.n(c),u=n(16),l=n(5),s=n(51),p=n(15),y=n(13),h=n(50),b=n.n(h);!function(e){e.None="",e.PlayerA="1",e.PlayerB="2"}(r||(r={}));var d=function(e,t){return Object(p.a)(Array(t)).map(function(t){return Object(p.a)(Array(e)).map(function(e){return r.None})})},f=function(e,t,n){for(var a=e.length-1;a>=0;--a)if(e[a][t]===r.None){var o=Object(p.a)(e).map(function(e){return Object(p.a)(e)});return o[a][t]=n,o}throw new Error("Unable to play: invalid position")},m=function(e,t,n){for(var a=0;e[a][t]===r.None;++a);var o=e[a][t],c=function(t){var n=0,r=!0,a=!1,c=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var l=i.value;if(l.x<0||l.x>=e[0].length||l.y<0||l.y>=e.length||e[l.y][l.x]!==o)break;++n}}catch(s){a=!0,c=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}return n},i=b.a.mark(function e(t,n,r,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,{x:t+=r,y:n+=a};case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)}),u=function(e,n){return c(i(t,a,-e,-n))+c(i(t,a,e,n))+1};return u(0,1)>=n||u(1,0)>=n||u(1,1)>=n||u(1,-1)>=n},O=6,v=7,j=4,E={grid:d(v,O),currentPlayer:r.PlayerA,winner:r.None,history:{past:[],future:[]}},P=function(e,t){if(e.winner!==r.None)throw new Error("Game is over, a player already won");var n=f(e.grid,t,e.currentPlayer),a=m(n,t,j);return Object(y.a)({},e,{grid:n,currentPlayer:e.currentPlayer===r.PlayerA?r.PlayerB:r.PlayerA,winner:a?e.currentPlayer:r.None,history:{past:[t].concat(Object(p.a)(e.history.past)),future:[]}})},w=Object(l.combineReducers)({connectFour:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_GAME":return Object(y.a)({},e,{grid:d(v,O),winner:r.None,history:{past:[],future:[]}});case"PLAY_AT":var n=t.payload.columnIdx;return P(e,n);case"REPLAY_ALL":console.log("replay all");var a=t.payload.columns,o=Object(y.a)({},e,{grid:d(v,O),winner:r.None,history:{past:[],future:[]}});return a.reduce(function(e,t){return P(e,t)},o);case"CANCEL_MOVE":if(0===e.history.past.length)throw new Error("Unable to undo operation, no more history available");var c=Object(s.a)(e.history.past),i=c[0],u=c.slice(1),l=function(e,t){for(var n=0;n!==e.length;++n)if(e[n][t]!==r.None){var a=Object(p.a)(e).map(function(e){return Object(p.a)(e)});return a[n][t]=r.None,a}throw new Error("Unable to unplay: invalid position")}(e.grid,i);return Object(y.a)({},e,{grid:l,currentPlayer:e.currentPlayer===r.PlayerA?r.PlayerB:r.PlayerA,winner:r.None,history:{past:u,future:[i].concat(Object(p.a)(e.history.future))}});case"REDO_MOVE":if(0===e.history.future.length)throw new Error("Unable to redo operation, no more history available");var h=Object(s.a)(e.history.future),b=h[0],w=h.slice(1),A=f(e.grid,b,e.currentPlayer),g=m(A,b,j);return Object(y.a)({},e,{grid:A,currentPlayer:e.currentPlayer===r.PlayerA?r.PlayerB:r.PlayerA,winner:g?e.currentPlayer:r.None,history:{past:[b].concat(Object(p.a)(e.history.past)),future:w}});default:return e}}}),A=n(69),g=Object(l.createStore)(w,Object(A.devToolsEnhancer)({})),N=(n(87),n(7)),k=n(8),C=n(10),S=n(9),F=n(11),U=(n(89),function(){return{type:"NEW_GAME",payload:null}}),x=function(e){return{type:"PLAY_AT",payload:{columnIdx:e}}},M=function(e){return{type:"REPLAY_ALL",payload:{columns:e}}},L=function(){return{type:"CANCEL_MOVE",payload:null}},_=function(){return{type:"REDO_MOVE",payload:null}},R=(n(91),n(93),n(95),function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"board-cell player-".concat(this.props.player)})}}]),t}(o.a.Component)),G=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"board-column ".concat(this.props.playable?"playable":"not-playable"),onClick:this.props.playable?this.props.onClick:void 0},this.props.tokens.map(function(e,t){return o.a.createElement(R,{key:t,player:e})}))}}]),t}(o.a.Component),B=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){for(var e=this,t=[],n=function(n){var a=e.props.grid[0][n]===r.None&&!e.props.done,c=e.props.grid.map(function(e){return e[n]});t.push(o.a.createElement(G,{key:n,playable:a,tokens:c,onClick:a?function(){return e.props.playAt(n)}:void 0}))},a=0;a!==this.props.grid[0].length;++a)n(a);return o.a.createElement("div",{className:"board player-"+this.props.currentPlayer},t)}}]),t}(o.a.Component);var z=Object(u.b)(function(e){return{grid:e.connectFour.grid,currentPlayer:e.connectFour.currentPlayer,done:e.connectFour.winner!==r.None}},function(e){return Object(y.a)({},Object(l.bindActionCreators)({playAt:x},e))})(B),D=(n(97),n(70)),V=n.n(D),Y=n(72),I=n.n(Y),T=n(71),J=n.n(T),W=n(41),q=n.n(W),H=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(q.a,{id:"undo-button",variant:"contained",onClick:function(){return e.props.cancelMove()},disabled:!this.props.canUndo},o.a.createElement(V.a,null)),o.a.createElement(q.a,{id:"new-game-button",variant:"contained",onClick:function(){return e.props.newGame()}},"New Game ",o.a.createElement(J.a,null)),o.a.createElement(q.a,{id:"redo-button",variant:"contained",onClick:function(){return e.props.redoMove()},disabled:!this.props.canRedo},o.a.createElement(I.a,null)))}}]),t}(o.a.Component);var K=Object(u.b)(function(e){return{canUndo:e.connectFour.history.past.length>0,canRedo:e.connectFour.history.future.length>0}},function(e){return Object(y.a)({},Object(l.bindActionCreators)({newGame:U,cancelMove:L,redoMove:_},e))})(H),Q=(n(187),function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.winner,n=e.currentPlayer;return t!==r.None?o.a.createElement("div",{className:"instructions victory player-".concat(t)},"Player #",t," won"):o.a.createElement("div",{className:"instructions player-".concat(n)},"Player #",n," turn")}}]),t}(o.a.Component));var X=Object(u.b)(function(e){return{currentPlayer:e.connectFour.currentPlayer,winner:e.connectFour.winner}},function(e){return Object(y.a)({},Object(l.bindActionCreators)({},e))})(Q),Z=n(193),$=n(194),ee=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(C.a)(this,Object(S.a)(t).call(this,e))).state={readStateFromUrl:!1},n}return Object(F.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.location.pathname?(this.props.replayAll(t.parseState(this.props.location.pathname)),this.setState({readStateFromUrl:!0})):this.setState({overridePath:t.serializeState(this.props),readStateFromUrl:!1})}},{key:"componentDidUpdate",value:function(e){var n=t.serializeState(e),r=t.serializeState(this.props);n!==r?this.state.readStateFromUrl?this.setState({readStateFromUrl:!1}):this.setState({overridePath:r,readStateFromUrl:!1}):e.location.pathname!==this.props.location.pathname&&this.props.location.pathname!==r&&(this.props.replayAll(t.parseState(this.props.location.pathname)),this.setState({readStateFromUrl:!0}))}},{key:"render",value:function(){return null==this.state.overridePath||this.state.overridePath===this.props.location.pathname?o.a.createElement(a.Fragment,null):o.a.createElement(Z.a,{to:this.state.overridePath})}}],[{key:"parseState",value:function(e){return e.substring(1).split("").map(function(e){return+e}).reverse()}},{key:"serializeState",value:function(e){return"/"+e.connectFour.history.past.join("")}}]),t}(o.a.Component);var te=Object($.a)(Object(u.b)(function(e){return e},function(e){return Object(y.a)({},Object(l.bindActionCreators)({replayAll:M},e))})(ee)),ne=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"connect-four-app"},o.a.createElement(te,null),o.a.createElement(X,null),o.a.createElement(z,null),o.a.createElement(K,null))}}]),t}(a.Component),re=n(192),ae=n(191),oe=document.getElementById("root");i.a.render(o.a.createElement(u.a,{store:g},o.a.createElement(re.a,null,o.a.createElement(ae.a,{path:"/:state?",component:ne}))),oe)},74:function(e,t,n){e.exports=n(190)},87:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){}},[[74,2,1]]]);
//# sourceMappingURL=main.fe2a3548.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,r){},190:function(e,t,r){"use strict";r.r(t);var n,a=r(0),o=r.n(a),i=r(29),c=r.n(i),l=r(16),u=r(5),s=r(51),p=r(15),y=r(13),h=r(50),f=r.n(h);!function(e){e.None="",e.PlayerA="1",e.PlayerB="2"}(n||(n={}));var b=function(e,t){return Object(p.a)(Array(t)).map(function(t){return Object(p.a)(Array(e)).map(function(e){return n.None})})},d=function(e,t,r){for(var a=e.length-1;a>=0;--a)if(e[a][t]===n.None){var o=Object(p.a)(e).map(function(e){return Object(p.a)(e)});return o[a][t]=r,o}throw new Error("Unable to play: invalid position")},m=function(e,t,r){for(var a=0;e[a][t]===n.None;++a);var o=e[a][t],i=function(t){var r=0,n=!0,a=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value;if(u.x<0||u.x>=e[0].length||u.y<0||u.y>=e.length||e[u.y][u.x]!==o)break;++r}}catch(s){a=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r},c=f.a.mark(function e(t,r,n,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,{x:t+=n,y:r+=a};case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)}),l=function(e,r){return i(c(t,a,-e,-r))+i(c(t,a,e,r))+1};return l(0,1)>=r||l(1,0)>=r||l(1,1)>=r||l(1,-1)>=r},v=6,O=7,j=4,P={grid:b(O,v),currentPlayer:n.PlayerA,winner:n.None,history:{past:[],future:[]}},E=function(e,t){if(e.winner!==n.None)throw new Error("Game is over, a player already won");var r=d(e.grid,t,e.currentPlayer),a=m(r,t,j);return Object(y.a)({},e,{grid:r,currentPlayer:e.currentPlayer===n.PlayerA?n.PlayerB:n.PlayerA,winner:a?e.currentPlayer:n.None,history:{past:[t].concat(Object(p.a)(e.history.past)),future:[]}})},g=Object(u.combineReducers)({connectFour:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_GAME":return Object(y.a)({},e,{grid:b(O,v),winner:n.None,history:{past:[],future:[]}});case"PLAY_AT":var r=t.payload.columnIdx;return E(e,r);case"REPLAY_ALL":var a=t.payload,o=a.columns,i=a.initialPlayer,c=Object(y.a)({},e,{currentPlayer:i,grid:b(O,v),winner:n.None,history:{past:[],future:[]}});return o.reduce(function(e,t){return E(e,t)},c);case"CANCEL_MOVE":if(0===e.history.past.length)throw new Error("Unable to undo operation, no more history available");var l=Object(s.a)(e.history.past),u=l[0],h=l.slice(1),f=function(e,t){for(var r=0;r!==e.length;++r)if(e[r][t]!==n.None){var a=Object(p.a)(e).map(function(e){return Object(p.a)(e)});return a[r][t]=n.None,a}throw new Error("Unable to unplay: invalid position")}(e.grid,u);return Object(y.a)({},e,{grid:f,currentPlayer:e.currentPlayer===n.PlayerA?n.PlayerB:n.PlayerA,winner:n.None,history:{past:h,future:[u].concat(Object(p.a)(e.history.future))}});case"REDO_MOVE":if(0===e.history.future.length)throw new Error("Unable to redo operation, no more history available");var g=Object(s.a)(e.history.future),k=g[0],w=g.slice(1),A=d(e.grid,k,e.currentPlayer),N=m(A,k,j);return Object(y.a)({},e,{grid:A,currentPlayer:e.currentPlayer===n.PlayerA?n.PlayerB:n.PlayerA,winner:N?e.currentPlayer:n.None,history:{past:[k].concat(Object(p.a)(e.history.past)),future:w}});default:return e}}}),k=r(69),w=Object(u.createStore)(g,Object(k.devToolsEnhancer)({})),A=(r(87),r(7)),N=r(8),C=r(10),S=r(9),F=r(11),G=(r(89),function(){return{type:"NEW_GAME",payload:null}}),M=function(e){return{type:"PLAY_AT",payload:{columnIdx:e}}},U=function(e,t){return{type:"REPLAY_ALL",payload:{columns:e,initialPlayer:t}}},x=function(){return{type:"CANCEL_MOVE",payload:null}},z=function(){return{type:"REDO_MOVE",payload:null}},W=(r(91),r(93),r(95),function(e){function t(){return Object(A.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"board-cell player-".concat(this.props.player)})}}]),t}(o.a.Component)),L=function(e){function t(){return Object(A.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"board-column ".concat(this.props.playable?"playable":"not-playable"),onClick:this.props.playable?this.props.onClick:void 0},this.props.tokens.map(function(e,t){return o.a.createElement(W,{key:t,player:e})}))}}]),t}(o.a.Component),_=function(e){function t(){return Object(A.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){for(var e=this,t=[],r=function(r){var a=e.props.grid[0][r]===n.None&&!e.props.done,i=e.props.grid.map(function(e){return e[r]});t.push(o.a.createElement(L,{key:r,playable:a,tokens:i,onClick:a?function(){return e.props.playAt(r)}:void 0}))},a=0;a!==this.props.grid[0].length;++a)r(a);return o.a.createElement("div",{className:"board player-"+this.props.currentPlayer},t)}}]),t}(o.a.Component);var B=Object(l.b)(function(e){return{grid:e.connectFour.grid,currentPlayer:e.connectFour.currentPlayer,done:e.connectFour.winner!==n.None}},function(e){return Object(y.a)({},Object(u.bindActionCreators)({playAt:M},e))})(_),R=(r(97),r(70)),D=r.n(R),V=r(72),Y=r.n(V),I=r(71),T=r.n(I),J=r(41),q=r.n(J),H=function(e){function t(){return Object(A.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(q.a,{id:"undo-button",variant:"contained",onClick:function(){return e.props.cancelMove()},disabled:!this.props.canUndo},o.a.createElement(D.a,null)),o.a.createElement(q.a,{id:"new-game-button",variant:"contained",onClick:function(){return e.props.newGame()}},"New Game ",o.a.createElement(T.a,null)),o.a.createElement(q.a,{id:"redo-button",variant:"contained",onClick:function(){return e.props.redoMove()},disabled:!this.props.canRedo},o.a.createElement(Y.a,null)))}}]),t}(o.a.Component);var K=Object(l.b)(function(e){return{canUndo:e.connectFour.history.past.length>0,canRedo:e.connectFour.history.future.length>0}},function(e){return Object(y.a)({},Object(u.bindActionCreators)({newGame:G,cancelMove:x,redoMove:z},e))})(H),Q=(r(187),function(e){function t(){return Object(A.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.winner,r=e.currentPlayer;return t!==n.None?o.a.createElement("div",{className:"instructions victory player-".concat(t)},"Player #",t," won"):o.a.createElement("div",{className:"instructions player-".concat(r)},"Player #",r," turn")}}]),t}(o.a.Component));var X,Z=Object(l.b)(function(e){return{currentPlayer:e.connectFour.currentPlayer,winner:e.connectFour.winner}},function(e){return Object(y.a)({},Object(u.bindActionCreators)({},e))})(Q),$=r(193),ee=r(194);!function(e){e.None="None",e.Game="Game",e.Manual="Manual"}(X||(X={}));var te=function(e){function t(e){var r;return Object(A.a)(this,t),(r=Object(C.a)(this,Object(S.a)(t).call(this,e))).state={onGoingWork:X.None},r}return Object(F.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=t.serializeStateFromProps(this.props);if(this.props.location.pathname!==e){var r=t.parseState(this.props.location.pathname);return this.props.replayAll(r.columns,r.initialPlayer),void this.setState({onGoingWork:X.Manual,redirectUrl:t.serializeStateFromParsed(r)})}}},{key:"componentDidUpdate",value:function(e){if(this.state.onGoingWork!==X.Game)if(this.state.onGoingWork!==X.Manual){var r=t.serializeStateFromProps(e),n=t.serializeStateFromProps(this.props);if(n===r){if(this.props.location.pathname!==e.location.pathname){var a=t.parseState(this.props.location.pathname);return this.props.replayAll(a.columns,a.initialPlayer),void this.setState({onGoingWork:X.Manual,redirectUrl:t.serializeStateFromParsed(a)})}}else this.setState({onGoingWork:X.Game,redirectUrl:n})}else{var o=t.serializeStateFromProps(this.props);this.props.location.pathname===this.state.redirectUrl&&this.state.redirectUrl===o&&this.setState({onGoingWork:X.None})}else this.props.location.pathname===this.state.redirectUrl&&this.setState({onGoingWork:X.None})}},{key:"render",value:function(){return this.state.onGoingWork===X.None||this.state.redirectUrl===this.props.location.pathname?o.a.createElement(a.Fragment,null):o.a.createElement($.a,{to:this.state.redirectUrl})}}],[{key:"parseState",value:function(e){return{initialPlayer:"2"===e[1]?n.PlayerB:n.PlayerA,columns:e.substring(2).split("").map(function(e){return+e}).reverse()}}},{key:"serializeState",value:function(e,t){return"/"+e+t.join("")}},{key:"serializeStateFromParsed",value:function(e){return this.serializeState(e.initialPlayer,e.columns.reverse())}},{key:"serializeStateFromProps",value:function(e){var t=e.connectFour.currentPlayer,r=t===n.PlayerA?n.PlayerB:n.PlayerA,a=e.connectFour.history.past.length%2===0?t:r;return this.serializeState(a,e.connectFour.history.past)}}]),t}(o.a.Component);var re=Object(ee.a)(Object(l.b)(function(e){return e},function(e){return Object(y.a)({},Object(u.bindActionCreators)({replayAll:U},e))})(te)),ne=function(e){function t(){return Object(A.a)(this,t),Object(C.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"connect-four-app"},o.a.createElement(re,null),o.a.createElement(Z,null),o.a.createElement(B,null),o.a.createElement(K,null))}}]),t}(a.Component),ae=r(192),oe=r(191),ie=document.getElementById("root");c.a.render(o.a.createElement(l.a,{store:w},o.a.createElement(ae.a,null,o.a.createElement(oe.a,{path:"/:state?",component:ne}))),ie)},74:function(e,t,r){e.exports=r(190)},87:function(e,t,r){},89:function(e,t,r){},91:function(e,t,r){},93:function(e,t,r){},95:function(e,t,r){},97:function(e,t,r){}},[[74,2,1]]]);
//# sourceMappingURL=main.1ee81566.chunk.js.map